<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="Heritier" content="QT Exam" />
    <meta name="generator" content="Hugo 0.84.0" />
    <title>Index</title>

    <!-- Bootstrap core CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet"
    />

    <!-- Custom styles for this template -->
    <link href="dist/css/custom.css" rel="stylesheet" />
    <!-- Datepicker  -->
    <link href="dist/css/google-ui.css" rel="stylesheet" />
    <link href="dist/css/sweetalert.css" rel="stylesheet" />
    <link href="dist/css/dataTables.jqueryui.min.css" rel="stylesheet" />
    <link href="dist/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="dist/css/responsive.dataTables.min.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container col-lg-6">
      <br />
      <br />
      <br />
      <h4>Registration Form</h4>
      <br />
      <div class="row">
        <div class="col-lg-6">
          Fist Name
          <input type="text" id="firstName" class="form-control" />
        </div>
        <div class="col-lg-6">
          Last Name
          <input type="text" id="lastName" class="form-control" />
        </div>

        <div class="col-lg-12">
          <br /><br />
          <select id="gender" class="gender form-control">
            <option value="1">Male</option>
            <option value="2">Female</option>
          </select>
          <br />
        </div>

        <div class="col-lg-6">
          Username
          <input type="text" id="username" class="form-control" />
        </div>
        <div class="col-lg-6">
          password
          <input type="text" id="password" class="form-control" />
        </div>
        <div class="col-lg-6">
          <br />
          <br />
          <button class="btn btn-primary register">Register</button>
        </div>
      </div>
    </div>

    <!-- Large modal -->

    <!-- bootstrap v5 -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <!-- Date Picker  -->
    <script src="dist/js/jquery.min.js"></script>
    <script src="dist/js/google-date-ui.js"></script>
    <!-- Sweet alert -->
    <script src="dist/js/sweetalert.mini.js"></script>
    <script src="dist/js/jquery.dataTables.min.js"></script>
    <!-- <script src="dist/js/dataTables.jqueryui.min.js"></script> -->
    <script src="dist/js/custom.js"></script>

    <script>
      $(document).ready(function () {
        const success = (message) => {
          swal("Success !", message, "success");
        };

        const error = (message) => {
          swal("Ooops !", message, "error");
        };

        const warning = (message) => {
          swal("Ooops !", message, "warning");
        };

        let $host_name = "http://localhost:8080";
        const registerTask = () => {
          let user = {
            username: $("#username").val(),
            firstName: $("#firstName").val(),
            lastName: $("#lastName").val(),
            gender: $("#gender").val(),
            password: $("#password").val(),
          };

          $.ajax({
            type: "POST",
            url: $host_name + "/register-user",
            dataType: "json",
            headers: { "Content-Type": "application/json", charset: "utf-8" },
            data: JSON.stringify(user),
            success: function (data) {
              success("You have successfully registered !");
            },
            error: function (xmlHttpRequest, textStatus, errorThrown) {
              if (xmlHttpRequest.readyState == 0 || xmlHttpRequest.status == 0)
                warning("The server is down !");
              else warning("Username is already taken !");
              // else warning(JSON.parse(xmlHttpRequest.responseText).message);
            },
          });
        };

        $(".register").click(function () {
          registerTask();
        });
      });
    </script>
  </body>
</html>
